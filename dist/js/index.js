!function(n,e){function t(t){this.dom=t,this.dataList=[],this.now=1,this.rotateTimer=null}t.prototype={init:function(){this.getDom(),this.getData("../mock/data.json")},getDom:function(){this.record=document.querySelector(".songImg img"),this.controlBtns=document.querySelectorAll(".control li"),this.wrapper=document.querySelector("#wrap")},getData:function(t){var o=this;n.ajax({url:t,method:"get",success:function(t){o.dataList=t,console.log(t),o.loadMusic(o.now),o.musicControl()},error:function(){console.log("失败")}})},loadMusic:function(t){e.render(this.dataList[t]),e.music.load(this.dataList[t].audioSrc),"play"===e.music.status?(e.music.play(),this.controlBtns[2].className="playing"):this.controlBtns[2].className=""},musicControl:function(){var o=this;o.controlBtns[1].addEventListener("touchend",function(){e.music.status="play",o.loadMusic(--o.now),o.imgRotate(0)}),o.controlBtns[3].addEventListener("touchend",function(){e.music.status="play",o.loadMusic(++o.now),o.imgRotate(0)}),o.controlBtns[2].addEventListener("touchend",function(){var t;"play"===e.music.status?(o.controlBtns[2].className="",e.music.pause(),o.imgStop()):(o.controlBtns[2].className="playing",e.music.play(),t=o.record.dataset.rotate||0,o.imgRotate(+t))})},imgRotate:function(t){var o=this;clearInterval(this.rotateTimer),this.rotateTimer=setInterval(function(){t+=.3,o.record.style.transform="rotate("+t+"deg)",o.record.dataset.rotate=t},1e3/60)},imgStop:function(){clearInterval(this.rotateTimer)}},new t(document.querySelector("#wrap")).init()}(window.Zepto,window.player);